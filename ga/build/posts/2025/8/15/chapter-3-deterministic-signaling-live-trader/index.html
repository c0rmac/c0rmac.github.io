<!doctype html><html lang="en" class="no-js"><head><meta charset="utf-8"> <!-- begin SEO --><title>Harnessing Deterministic Signals through Stochastic Sampling: A State-Based Approach to Algorithmic Trading - Cormac Kinsella</title><meta property="og:locale" content="en-US"><meta property="og:site_name" content="Cormac Kinsella"><meta property="og:title" content="Harnessing Deterministic Signals through Stochastic Sampling: A State-Based Approach to Algorithmic Trading"><link rel="canonical" href="https://c0rmac.github.io/posts/2025/8/15/chapter-3-deterministic-signaling-live-trader/"><meta property="og:url" content="https://c0rmac.github.io/posts/2025/8/15/chapter-3-deterministic-signaling-live-trader/"><meta property="og:description" content=" Abstract: This article details the architecture and methodology of an automated, quantitative trading system designed for cryptocurrency markets. The system’s core is a machine learning strategy that leverages unsupervised clustering to identify distinct market patterns and applies cluster-specific models to generate daily trade signals. Trade execution is managed through a sophisticated two-phase lifecycle, incorporating a momentum-based entry confirmation and dynamic in-trade risk management. The software is designed with a dual-mode operational framework, allowing for both live trading and robust, parallelized backtesting on historical data. This document outlines the system’s modular components, the intricacies of the trading and capital management strategies, and the implementation of its operational modes."><meta property="og:type" content="article"><meta property="article:published_time" content="2025-08-15T00:00:00-07:00"> <script type="application/ld+json"> { "@context" : "http://schema.org", "@type" : "Person", "name" : "Cormac Kinsella", "url" : "https://c0rmac.github.io", "sameAs" : null } </script> <!-- end SEO --><link href="https://c0rmac.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Cormac Kinsella Feed"> <!-- http://t.co/dKP3o1e --><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width, initial-scale=1.0"> <script> document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js '; </script> <!-- For all browsers --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"><link rel="stylesheet" href="https://c0rmac.github.io/assets/css/main.css"><meta http-equiv="cleartype" content="on"> <!-- start custom head snippets --><link rel="apple-touch-icon" sizes="57x57" href="https://c0rmac.github.io/images/apple-touch-icon-57x57.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="60x60" href="https://c0rmac.github.io/images/apple-touch-icon-60x60.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="72x72" href="https://c0rmac.github.io/images/apple-touch-icon-72x72.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="76x76" href="https://c0rmac.github.io/images/apple-touch-icon-76x76.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="114x114" href="https://c0rmac.github.io/images/apple-touch-icon-114x114.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="120x120" href="https://c0rmac.github.io/images/apple-touch-icon-120x120.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="144x144" href="https://c0rmac.github.io/images/apple-touch-icon-144x144.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="152x152" href="https://c0rmac.github.io/images/apple-touch-icon-152x152.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="180x180" href="https://c0rmac.github.io/images/apple-touch-icon-180x180.png?v=M44lzPylqQ"><link rel="icon" type="image/png" href="https://c0rmac.github.io/images/favicon-32x32.png?v=M44lzPylqQ" sizes="32x32"><link rel="icon" type="image/png" href="https://c0rmac.github.io/images/android-chrome-192x192.png?v=M44lzPylqQ" sizes="192x192"><link rel="icon" type="image/png" href="https://c0rmac.github.io/images/favicon-96x96.png?v=M44lzPylqQ" sizes="96x96"><link rel="icon" type="image/png" href="https://c0rmac.github.io/images/favicon-16x16.png?v=M44lzPylqQ" sizes="16x16"><link rel="manifest" href="https://c0rmac.github.io/images/manifest.json?v=M44lzPylqQ"><link rel="mask-icon" href="https://c0rmac.github.io/images/safari-pinned-tab.svg?v=M44lzPylqQ" color="#000000"><link rel="shortcut icon" href="/images/favicon.ico?v=M44lzPylqQ"><meta name="msapplication-TileColor" content="#000000"><meta name="msapplication-TileImage" content="https://c0rmac.github.io/images/mstile-144x144.png?v=M44lzPylqQ"><meta name="msapplication-config" content="https://c0rmac.github.io/images/browserconfig.xml?v=M44lzPylqQ"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="https://c0rmac.github.io/assets/css/academicons.css"/> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "all" } } }); </script> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } }); </script> <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML' async></script> <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script> <!-- end custom head snippets --></head><body> <!--[if lt IE 9]><div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]--><div class="masthead"><div class="masthead__inner-wrap"><div class="masthead__menu"><nav id="site-nav" class="greedy-nav"> <button><div class="navicon"></div></button><ul class="visible-links"><li class="masthead__menu-item masthead__menu-item--lg"><a href="https://c0rmac.github.io/">Cormac Kinsella</a></li><li class="masthead__menu-item"><a href="https://c0rmac.github.io/year-archive/">Blog</a></li><li class="masthead__menu-item"><a href="https://c0rmac.github.io/teaching/">Teaching</a></li><li class="masthead__menu-item"><a href="https://c0rmac.github.io/portfolio/">Portfolio</a></li><li class="masthead__menu-item"><a href="https://c0rmac.github.io/cv/">CV</a></li><li class="masthead__menu-item"><a href="https://c0rmac.github.io/publications/">Publications</a></li><li class="masthead__menu-item"><a href="/ga/posts/2025/8/15/chapter-3-deterministic-signaling-live-trader/">Use site in Irish Gaelic</a></li></ul><ul class="hidden-links hidden"></ul></nav></div></div></div><div id="main" role="main"><div class="sidebar sticky"><div itemscope itemtype="http://schema.org/Person"><div class="author__avatar"> <img src="https://c0rmac.github.io/images/profile.jpeg" class="author__avatar" alt="Cormac Kinsella"></div><div class="author__content"><h3 class="author__name">Cormac Kinsella</h3><p class="author__bio">Mathematics Master Student and Software Engineer</p></div><div class="author__urls-wrapper"> <button class="btn btn--inverse">Follow</button><ul class="author__urls social-icons"><li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Munich, Germany</li><li><a href="https://github.com/c0rmac"><i class="fab fa-fw fa-github" aria-hidden="true"></i> Github</a></li></ul></div></div></div><article class="page" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="headline" content="Harnessing Deterministic Signals through Stochastic Sampling: A State-Based Approach to Algorithmic Trading"><meta itemprop="description" content=" Abstract: This article details the architecture and methodology of an automated, quantitative trading system designed for cryptocurrency markets. The system’s core is a machine learning strategy that leverages unsupervised clustering to identify distinct market patterns and applies cluster-specific models to generate daily trade signals. Trade execution is managed through a sophisticated two-phase lifecycle, incorporating a momentum-based entry confirmation and dynamic in-trade risk management. The software is designed with a dual-mode operational framework, allowing for both live trading and robust, parallelized backtesting on historical data. This document outlines the system’s modular components, the intricacies of the trading and capital management strategies, and the implementation of its operational modes."><meta itemprop="datePublished" content="August 15, 2025"><div class="page__inner-wrap"><header><h1 class="page__title" itemprop="headline">Harnessing Deterministic Signals through Stochastic Sampling: A State-Based Approach to Algorithmic Trading</h1><p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 12 minute read</p><p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Published:</strong> <time datetime="2025-08-15T00:00:00-07:00">August 15, 2025</time></p></header><section class="page__content" itemprop="text"><blockquote><p><strong>Abstract:</strong> This article details the architecture and methodology of an automated, quantitative trading system designed for cryptocurrency markets. The system’s core is a machine learning strategy that leverages unsupervised clustering to identify distinct market patterns and applies cluster-specific models to generate daily trade signals. Trade execution is managed through a sophisticated two-phase lifecycle, incorporating a momentum-based entry confirmation and dynamic in-trade risk management. The software is designed with a dual-mode operational framework, allowing for both live trading and robust, parallelized backtesting on historical data. This document outlines the system’s modular components, the intricacies of the trading and capital management strategies, and the implementation of its operational modes.</p></blockquote><style> /* This is the container that will allow scrolling */ #diagram-container { width: 100%; max-height: 700px; /* This is the key property: it adds scrollbars ONLY if needed */ overflow: auto; } /* Add some padding around the diagram itself */ .mermaid { width: 200%; padding: 20px; box-sizing: border-box; }</style><h2 id="1-system-architecture">1. System Architecture</h2><p>The software is built on a modular, event-driven architecture that separates concerns into distinct, interacting components. The <code class="language-plaintext highlighter-rouge">LiveTrader</code> class serves as the central orchestrator, managing the overall trading lifecycle, budget, and state transitions.</p><p>The primary components are:</p><ul><li><p><strong>Predictor</strong>: The “brain” of the system, responsible for analyzing market data and generating a list of nominated assets for potential trading.</p></li><li><p><strong>Strategy Agents (<code class="language-plaintext highlighter-rouge">PreTrade</code>, <code class="language-plaintext highlighter-rouge">ActiveTrade</code>)</strong>: These classes define the logic for each stage of a trade’s lifecycle, from initial nomination to final sale. They implement the base <code class="language-plaintext highlighter-rouge">TradingAgent</code> interface.</p></li><li><p><strong>Budget Manager</strong>: A sophisticated class that compartmentalizes and tracks capital across various states: unallocated (<code class="language-plaintext highlighter-rouge">main</code>), nominated (<code class="language-plaintext highlighter-rouge">pre_trade</code>), active, and designated for reinvestment (<code class="language-plaintext highlighter-rouge">divestment</code>, <code class="language-plaintext highlighter-rouge">held_for_reinvestment</code>).</p></li><li><p><strong>API Executor</strong>: An abstraction layer responsible for executing buy and sell orders, whether in a simulated environment or with a live exchange API.</p></li><li><p><strong>Operational Entrypoints</strong>: The system has two primary modes of execution:</p><ul><li><p><code class="language-plaintext highlighter-rouge">main.py</code>: The entry point for live or paper trading, which uses a scheduler to run prediction and data-fetching tasks at set intervals.</p></li><li><p><code class="language-plaintext highlighter-rouge">test_trader.py</code>: The entry point for backtesting, which simulates the entire process against historical data to evaluate strategy performance.</p></li></ul></li></ul><h2 id="2-the-trading-strategy">2. The Trading Strategy</h2><p>The core strategy is a multi-stage process designed to identify high-probability setups and manage risk dynamically once a position is open.</p><h3 id="21-signal-generation-predictor">2.1. Signal Generation (Predictor)</h3><p>The signal generation process, encapsulated within the <code class="language-plaintext highlighter-rouge">Predictor</code> class, is executed once per day at 23:55, as defined in <code class="language-plaintext highlighter-rouge">main.py</code>. It leverages pre-trained machine learning models.</p><ol><li><p><strong>Clustering for Market Regimes</strong>: The system uses an unsupervised learning model (k-means) to classify the current market state into a predefined cluster. This is based on various features derived from candlestick data. The assumption is that different market patterns (e.g., high volatility, low volatility, trending) require different predictive approaches.</p></li><li><p><strong>Cluster-Specific Prediction</strong>: For each identified cluster, a dedicated predictive model is loaded. When new data is processed, it is first assigned to a cluster, and then the corresponding model for that cluster is invoked to determine if a “buy” signal should be issued. This tailored approach allows the strategy to adapt to changing market conditions.</p></li></ol><h3 id="22-trade-execution-logic">2.2. Trade Execution Logic</h3><p>A signal from the <code class="language-plaintext highlighter-rouge">Predictor</code> does not trigger an immediate market buy. Instead, it initiates a two-phase execution and management process.</p><h4 id="221-phase-1-pre-trade-confirmation-pretrade-class">2.2.1. Phase 1: Pre-Trade Confirmation (<code class="language-plaintext highlighter-rouge">PreTrade</code> Class)</h4><p>Once an asset is nominated, it enters a “pre-trade” state for a maximum of 24 hours. This phase acts as a filter to confirm market momentum before committing capital.</p><ul><li><p><strong>Breakout Trigger</strong>: A price window is established around the price at the time of nomination, defined by a <code class="language-plaintext highlighter-rouge">limit_price</code> (e.g., initial price * 1.005) and a <code class="language-plaintext highlighter-rouge">stop_price</code> (e.g., initial price * 0.92).</p></li><li><p><strong>Buy Execution</strong>: A “buy” action is only triggered if the price breaks out of this window in either direction. This ensures the asset is showing significant momentum, reducing the risk of entering a stagnant market.</p></li><li><p><strong>Expiration</strong>: If the price does not break the window within the 24-hour period, the pre-trade nomination expires, and the allocated capital is returned to a holding pool.</p></li></ul><h4 id="222-phase-2-active-trade-management-activetrade-class">2.2.2. Phase 2: Active Trade Management (<code class="language-plaintext highlighter-rouge">ActiveTrade</code> Class)</h4><p>Upon a successful buy, the asset transitions to an “active trade” state, where a dynamic risk management strategy is applied.</p><ul><li><p><strong>Profit Target</strong>: A static profit-taking limit is set upon purchase (e.g., purchase price * 1.52).</p></li><li><p><strong>Dynamic Stop-Loss</strong>: The system employs a trailing stop-loss to protect capital and lock in profits. The initial stop-loss is set at a fixed percentage below the purchase price (e.g., 98.3%). However, as the trade becomes profitable (e.g., price exceeds 110% of purchase price), the stop-loss is dynamically adjusted upwards to trail the current price, securing gains while giving the trade room to grow.</p></li><li><p><strong>Capital Recycling (Divestment)</strong>: When a trade is sold at a loss, the proceeds are not returned to the main budget. Instead, they are moved to a <code class="language-plaintext highlighter-rouge">divestment</code> pool. The system then seeks to reinvest this capital into other <em>active</em> trades that are showing early signs of profitability, effectively increasing the position size of the current cycle’s winners.</p></li></ul><h3 id="23-trade-lifecycle-flowchart">2.3 Trade Lifecycle Flowchart</h3><p>The following diagram illustrates the complete process managed by the <code class="language-plaintext highlighter-rouge">LiveTrader</code>, which is driven by two distinct, scheduled triggers.</p><div id="diagram-container"><pre class="mermaid">
graph TD
    subgraph "Start of Day"
        A["Daily Prediction @ 23:55"] --&gt; B{Cycle Active?}
        B -- No --&gt; C[Start New Cycle: Process Predictions &amp; Allocate Capital]
        B -- Yes --&gt; D((Ignore Prediction))
    end

    subgraph "Ongoing Operations (Triggered every 5 mins)"
        C --&gt; F
        E["Price Update @ 5 min intervals"] --&gt; F[For each active asset...]

        subgraph "Pre-Trade Asset Logic"
            F --&gt; G{State is Pre-Trade?}
            G -- Yes --&gt; H{Expired?}
            H -- Yes --&gt; I[Expire Asset: Move Capital to Holding Pool]
            H -- No --&gt; J{Price Breakout?}
            J -- Yes --&gt; K[BUY Asset: Transition to Active Trade]
            J -- No --&gt; L((Hold))
        end

        subgraph "Active-Trade Asset Logic"
            G -- No --&gt; M{State is Active Trade?}
            M -- Yes --&gt; N{"Sell Signal? (Profit/Loss)"}
            N -- Yes --&gt; O[SELL Asset]
            O --&gt; P{Profit or Loss?}
            P -- Profit --&gt; Q[Move Proceeds to Main Budget]
            P -- Loss --&gt; R[Move Proceeds to Divestment Pool]
            N -- No --&gt; S((Hold))
        end

        subgraph "Post-Tick Processing"
            I --&gt; T{All Assets Closed?}
            K --&gt; T
            L --&gt; T
            Q --&gt; T
            R --&gt; T
            S --&gt; T
            T -- No --&gt; U[Process Divestment Pool]
            U --&gt; V{Capital to Reinvest?}
            V -- Yes --&gt; W[Reinvest into eligible Active Trades]
            V -- No --&gt; X((Wait for next tick))
            W --&gt; X
        end
    end

    subgraph "End of Cycle"
        T -- Yes --&gt; Y[End Cycle: Calculate P/L]
        Y --&gt; Z{Activate Dry Run for Next Cycle?}
        Z -- Yes --&gt; AA((Reset for Dry Run Cycle))
        Z -- No --&gt; AB((Reset for Live Cycle))
    end

    style A fill:#cde4f9,stroke:#333,stroke-width:2px
    style E fill:#d2f5d2,stroke:#333,stroke-width:2px
    style Y fill:#cde4f9,stroke:#333,stroke-width:2px
    </pre></div><h2 id="3-capital-and-risk-management">3. Capital and Risk Management</h2><p>The <code class="language-plaintext highlighter-rouge">LiveTrader</code> class implements a robust framework for managing capital and mitigating risk through operational modes.</p><h3 id="31-budget-allocation-budget-class">3.1. Budget Allocation (<code class="language-plaintext highlighter-rouge">Budget</code> Class)</h3><p>The <code class="language-plaintext highlighter-rouge">Budget</code> class provides granular control over the trading capital by dividing it into distinct pools. Capital flows between these pools based on trade events:</p><ul><li><p><code class="language-plaintext highlighter-rouge">main</code>: Liquid capital available for allocation.</p></li><li><p><code class="language-plaintext highlighter-rouge">pre_trade_allocations</code>: Capital reserved for nominated assets awaiting a buy trigger.</p></li><li><p><code class="language-plaintext highlighter-rouge">active_trade_allocations</code>: Capital deployed in live positions.</p></li><li><p><code class="language-plaintext highlighter-rouge">divestment</code>: Proceeds from losing trades, held for strategic reinvestment into potentially profitable active trades.</p></li><li><p><code class="language-plaintext highlighter-rouge">held_for_reinvestment</code>: Capital from expired pre-trade nominations, which can be redeployed in the next trading cycle.</p></li></ul><h3 id="32-dry-run-and-live-modes">3.2. Dry-Run and Live Modes</h3><p>The system can operate in a “dry-run” (paper trading) mode as a risk-control measure.</p><ul><li><p><strong>Automatic Dry-Run Activation</strong>: The system automatically enters dry-run mode after a configurable number of consecutive losing cycles (<code class="language-plaintext highlighter-rouge">dry_run_loss_threshold</code>). This halts real-capital deployment during unfavorable market periods.</p></li><li><p><strong>Profit-Triggered Conversion to Live</strong>: A key innovation is the ability to convert an entire dry-run cycle to live trading mid-cycle. If any single paper trade in a dry-run cycle reaches a significant profit threshold (<code class="language-plaintext highlighter-rouge">dry_run_to_live_threshold</code>), the system can be configured to immediately deploy real capital across all active paper positions, aiming to capture a highly favorable market-wide move.</p></li></ul><h2 id="4-implementation-and-operation">4. Implementation and Operation</h2><h3 id="41-live-trading-mainpy">4.1. Live Trading (<code class="language-plaintext highlighter-rouge">main.py</code>)</h3><p>The live execution script orchestrates the system for real-time operation.</p><ul><li><p><strong>Scheduler</strong>: A <code class="language-plaintext highlighter-rouge">Runner</code> object schedules two primary tasks: fetching price data from the <code class="language-plaintext highlighter-rouge">DataStream</code> every 5 minutes and running the <code class="language-plaintext highlighter-rouge">PredictionTask</code> daily at 23:55.</p></li><li><p><strong>Status Server</strong>: A lightweight HTTP server is launched in a separate thread to provide real-time status updates on the trader’s performance, budget, and active positions.</p></li></ul><h3 id="42-backtesting-framework-test_traderpy">4.2. Backtesting Framework (<code class="language-plaintext highlighter-rouge">test_trader.py</code>)</h3><p>The backtesting script provides a powerful framework for strategy validation.</p><ul><li><p><strong>Historical Data Simulation</strong>: The script loads historical price data from pickle files and iterates through it, simulating the price tick-by-tick flow of a live environment.</p></li><li><p><strong>Parallel Execution</strong>: To achieve a statistically significant evaluation, the script leverages <code class="language-plaintext highlighter-rouge">joblib</code> and <code class="language-plaintext highlighter-rouge">tqdm</code> to run hundreds of independent simulations in parallel over the same historical dataset.</p></li><li><p><strong>Performance Analysis</strong>: At the conclusion of the runs, it aggregates the results and generates histograms of final capital distribution. This provides a deep understanding of the strategy’s expected return, risk profile, and consistency.</p></li></ul><h2 id="5-potential-issues-and-future-improvements">5. Potential Issues and Future Improvements</h2><p>While the system’s architecture is robust, several design choices present opportunities for refinement and could pose risks in a live environment.</p><h3 id="51-dynamic-risk-parameters">5.1. Dynamic Risk Parameters</h3><ul><li><p><strong>Issue</strong>: The current system uses static, “one-size-fits-all” risk parameters (e.g., <code class="language-plaintext highlighter-rouge">limit_returns = 1.52</code>, <code class="language-plaintext highlighter-rouge">stop_returns = 0.983</code>). This is not neccesarily optimal, as different assets and market conditions have different volatility profiles.</p></li><li><p><strong>A Potential Improvement</strong>: The parameters could be made dynamic. The ideal objective would be to learn a function $\theta^*(X_t, a)$ that maps the current market state and asset characteristics to an optimal set of risk parameters. This function would be the solution to the optimization problem, which is a formulation of the well-known Kelly Criterion (Kelly, 1956):</p>\[\theta^*(X_t, a) = \arg\max_{\theta} \mathbb{E} \left[ \log(1 + R_a(\theta)) \,|\, X_t, a \right]\]<p>where $R_a(\theta)$ is the return of a single trade on asset $a$ using parameters $\theta$.</p><p><strong>Relaxation</strong>: A practical relaxation is to optimize a proxy metric over historical data. For each market cluster <code class="language-plaintext highlighter-rouge">c</code>, we can find the parameters $\theta_c^*$ that maximize the Sharpe Ratio (Sharpe, 1966) of simulated historical returns:</p>\[\theta_c^* = \arg\max_{\theta} \frac{\mathbb{E}[\text{SimulateReturns}(D_c, \theta)]}{\sqrt{\text{Var}[\text{SimulateReturns}(D_c, \theta)]}}\]</li></ul><h3 id="52-managing-prediction-randomness">5.2. Managing Prediction Randomness</h3><ul><li><p><strong>Issue</strong>: After the model generates a list of nominated coins, the system randomly selects a subset to trade. This introduces a significant element of luck, meaning the performance of any single cycle can have a very high variance.</p></li><li><p><strong>A Potential Improvement</strong>: One possible improvement is to run an ensemble of $K$ independent <code class="language-plaintext highlighter-rouge">LiveTrader</code> instances in parallel. The total portfolio return would be the sample mean of all instances:</p>\[\bar{R}_{K,t} = \frac{1}{K} \sum_{i=1}^{K} R_{i,t}\]<p>By the Law of Large Numbers, as $K$ increases, this sample mean converges to the true expected return of the strategy, and its variance is reduced by a factor of $K$. This ensemble approach (Dietterich, 2000) could transform high variance into a predictable, stable return.</p></li></ul><h3 id="53-risk-based-position-sizing">5.3. Risk-Based Position Sizing</h3><ul><li><p><strong>Issue</strong>: The system divides capital equally among all selected trades, treating all trades as having equal potential and risk.</p></li><li><p><strong>A Potential Improvement</strong>: A position sizing model could be implemented. For example, the capital allocated to a trade could be inversely proportional to the asset’s recent volatility. This would mean taking smaller positions on riskier assets and larger positions on more stable ones, leading to a more balanced risk profile across the portfolio.</p></li></ul><h2 id="6-next-steps-empirical-evaluation">6. Next Steps: Empirical Evaluation</h2><p>Having detailed the theoretical framework, architecture, and potential improvements of the trading system, the subsequent article in this series will be dedicated to a rigorous empirical evaluation. We will conduct a comprehensive backtest of the model as described, running the simulation on historical data from the first six months of 2025 to assess its real-world performance and validate the strategies discussed herein.</p><p><strong>References</strong></p><ul><li><p>Dietterich, T. G. (2000). Ensemble Methods in Machine Learning. <em>Multiple Classifier Systems</em>, 1-15.</p></li><li><p>Kelly, J. L. (1956). A New Interpretation of Information Rate. <em>Bell System Technical Journal, 35</em>(4), 917-926.</p></li><li><p>MacLean, L. C., Thorp, E. O., &amp; Ziemba, W. T. (Eds.). (2011). <em>The Kelly capital growth investment criterion: Theory and practice</em>. World Scientific.</p></li><li><p>Rotando, L. M., &amp; Thorp, E. O. (1992). The Kelly criterion and the stock market. <em>The American Mathematical Monthly, 99</em>(10), 922-931.</p></li><li><p>Sharpe, W. F. (1966). Mutual Fund Performance. <em>The Journal of Business, 39</em>(1), 119-138.</p></li><li><p>Thorp, E. O. (2006). The Kelly Criterion in Blackjack, Sports Betting, and the Stock Market. In <em>Handbook of asset and liability management</em> (Vol. 1, pp. 385-428). Elsevier.</p></li></ul><script type="module"> import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs'; mermaid.initialize({ startOnLoad: true }); </script></section><footer class="page__meta"><p class="page__taxonomy"> <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong> <span itemprop="keywords"> <a href="https://c0rmac.github.io/tags/#algorithmic-trading" class="page__taxonomy-item" rel="tag">algorithmic trading</a><span class="sep">, </span> <a href="https://c0rmac.github.io/tags/#backtesting" class="page__taxonomy-item" rel="tag">backtesting</a><span class="sep">, </span> <a href="https://c0rmac.github.io/tags/#cryptocurrency" class="page__taxonomy-item" rel="tag">cryptocurrency</a><span class="sep">, </span> <a href="https://c0rmac.github.io/tags/#k-means-clustering" class="page__taxonomy-item" rel="tag">k-means clustering</a><span class="sep">, </span> <a href="https://c0rmac.github.io/tags/#kelly-criterion" class="page__taxonomy-item" rel="tag">kelly criterion</a><span class="sep">, </span> <a href="https://c0rmac.github.io/tags/#machine-learning" class="page__taxonomy-item" rel="tag">machine learning</a><span class="sep">, </span> <a href="https://c0rmac.github.io/tags/#portfolio-optimization" class="page__taxonomy-item" rel="tag">portfolio optimization</a><span class="sep">, </span> <a href="https://c0rmac.github.io/tags/#python" class="page__taxonomy-item" rel="tag">python</a><span class="sep">, </span> <a href="https://c0rmac.github.io/tags/#quantitative-finance" class="page__taxonomy-item" rel="tag">quantitative finance</a><span class="sep">, </span> <a href="https://c0rmac.github.io/tags/#risk-management" class="page__taxonomy-item" rel="tag">risk management</a><span class="sep">, </span> <a href="https://c0rmac.github.io/tags/#sharpe-ratio" class="page__taxonomy-item" rel="tag">sharpe ratio</a><span class="sep">, </span> <a href="https://c0rmac.github.io/tags/#simulation" class="page__taxonomy-item" rel="tag">simulation</a><span class="sep">, </span> <a href="https://c0rmac.github.io/tags/#state-based-model" class="page__taxonomy-item" rel="tag">state-based model</a><span class="sep">, </span> <a href="https://c0rmac.github.io/tags/#stochastic-modeling" class="page__taxonomy-item" rel="tag">stochastic modeling</a> </span></p></footer><section class="page__share"><h4 class="page__share-title">Share on</h4><a href="https://twitter.com/intent/tweet?text=https://c0rmac.github.io/posts/2025/8/15/chapter-3-deterministic-signaling-live-trader/" class="btn btn--twitter" title="Share on Twitter"><i class="fab fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=https://c0rmac.github.io/posts/2025/8/15/chapter-3-deterministic-signaling-live-trader/" class="btn btn--facebook" title="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://c0rmac.github.io/posts/2025/8/15/chapter-3-deterministic-signaling-live-trader/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fab fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a></section><nav class="pagination"> <a href="https://c0rmac.github.io/posts/2025/8/15/chapter-2-improving-odds/" class="pagination--pager" title="Improving the Odds: A Heuristic Method for Selecting Crypto Breakouts ">Previous</a> <a href="#" class="pagination--pager disabled">Next</a></nav></div></article><div class="page__related"><h4 class="page__related-title">You May Also Enjoy</h4><div class="grid__wrapper"><div class="grid__item"><article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork"><h2 class="archive__item-title" itemprop="headline"> <a href="https://c0rmac.github.io/posts/2025/8/15/chapter-2-improving-odds/" rel="permalink">Improving the Odds: A Heuristic Method for Selecting Crypto Breakouts </a></h2><p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 14 minute read</p><p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Published:</strong> <time datetime="2025-08-15T00:00:00-07:00">August 15, 2025</time></p><p class="archive__item-excerpt" itemprop="description"><blockquote><p><strong>Abstract:</strong> This document details a proprietary algorithm designed to predict significant upward price movements, or “breakouts,” in crypto-assets. The methodology is built on a multi-stage process that transforms raw market data into a powerful selection heuristic. The algorithm leverages historical price action, market sentiment, and a novel, stability-focused machine learning approach to identify and leverage a more favorable, informed subset of the crypto-asset universe for potential trading opportunities.</p></blockquote></p></article></div><div class="grid__item"><article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork"><h2 class="archive__item-title" itemprop="headline"> <a href="https://c0rmac.github.io/posts/2025/8/15/chapter-1-cluster-buster/" rel="permalink">Identifying Market Accumulation Patterns with K-Means Clustering </a></h2><p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 4 minute read</p><p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Published:</strong> <time datetime="2025-08-15T00:00:00-07:00">August 15, 2025</time></p><p class="archive__item-excerpt" itemprop="description"><blockquote><p><strong>Abstract:</strong> This paper details the “ClusterBuster” algorithm, a methodology for identifying potentially profitable market conditions using unsupervised machine learning. The approach leverages K-Means clustering to group historical financial data, with features primarily derived from rolling modes of the “Fear and Greed Index” over various lookback periods. Each resulting cluster is evaluated using custom performance metrics: the “breakthrough ratio” to quantify upside potential and the “loss ratio” to assess downside risk. The core of the algorithm is an optimization loop that systematically tests different numbers of clusters to identify a model that maximizes the proportion of high-performing, or “breakthrough,” clusters. The final output is an optimized clustering model that effectively isolates historical data patterns correlated with significant positive returns, providing a systematic approach to identifying trading opportunities.</p></blockquote></p></article></div><div class="grid__item"><article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork"><h2 class="archive__item-title" itemprop="headline"> <a href="https://c0rmac.github.io/posts/2023/1/bcms-upload-1/" rel="permalink">Public Documentation on BCMS Upload Services </a></h2><p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 5 minute read</p><p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Published:</strong> <time datetime="2023-01-05T00:00:00-08:00">January 05, 2023</time></p><p class="archive__item-excerpt" itemprop="description"><p>I provide public documentation of my work regarding <a href="/portfolio/bcms-upload/">BCMS Upload Services</a> in this article where you can see how I structured the application and what decisions led me to those structures be implemented in the application. I show my own way of creating an application and apply my principles which are shown in my work in <code class="language-plaintext highlighter-rouge">trin-app</code> and <code class="language-plaintext highlighter-rouge">trin-react</code>.</p></p></article></div><div class="grid__item"><article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork"><h2 class="archive__item-title" itemprop="headline"> <a href="https://c0rmac.github.io/posts/2022/12/coding-challenge-1/" rel="permalink">Derive a function that simulates an unbiased coin toss - Coding Challenge 1 </a></h2><p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 2 minute read</p><p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Published:</strong> <time datetime="2022-12-18T00:00:00-08:00">December 18, 2022</time></p><p class="archive__item-excerpt" itemprop="description"><blockquote><p>Suppose toss_biased is a function which returns Heads (H) or Tails (T) with probability $p$ and $q$, \(p \neq q\), ie. the toss is biased. <br /><br /> Derive a function that simulates an unbiased coin toss</p></blockquote></p></article></div></div></div></div><div class="page__footer"><footer> <!-- start custom footer snippets --> <a href="/sitemap/">Sitemap</a> <!-- end custom footer snippets --><div class="page__footer-follow"><ul class="social-icons"><li><strong>Follow:</strong></li><li><a href="http://github.com/c0rmac"><i class="fab fa-github" aria-hidden="true"></i> GitHub</a></li><li><a href="https://c0rmac.github.io/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li></ul></div><div class="page__footer-copyright">&copy; 2025 Cormac Kinsella. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/academicpages/academicpages.github.io">AcademicPages</a>, a fork of <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div></footer></div><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script> <script src="https://c0rmac.github.io/assets/js/main.min.js"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', '', 'auto'); ga('send', 'pageview'); </script></body></html>
